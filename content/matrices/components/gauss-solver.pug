.matrix
.operation
  svg.connections-left(width=100 height=120)
    path(:d="'M20,'+(20+40*inRow1)+'C50,'+(20+40*inRow1)+',50,60,80,60'" stroke="red")
    circle(cx=20 :cy="20+40*inRow1" r=8 fill="red")
    path(:d="'M20,'+(20+40*inRow2)+'C50,'+(20+40*inRow2)+',50,60,80,60'" stroke="blue" :show="op !== 'multiply'")
    circle(cx=20 :cy="20+40*inRow2" r=8 fill="blue" :show="op !== 'multiply'")
  svg.connections-right(width=100 height=120)
    path(:d="'M20,60C50,60,50,'+(20+40*outRow1)+',80,'+(20+40*outRow1)" stroke="red")
    polygon(:points="'76,'+(20+40*outRow1-8)+' 76,'+(20+40*outRow1+8)+',92,'+(20+40*outRow1)" fill="red")
    path(:d="'M20,60C50,60,50,'+(20+40*outRow2)+',80,'+(20+40*outRow2)" stroke="blue" :show="op === 'swap'")
    polygon(:points="'76,'+(20+40*outRow2-8)+' 76,'+(20+40*outRow2+8)+' 92,'+(20+40*outRow2)" fill="blue" :show="op === 'swap'")
  x-select(:bind="op")
    .op(value="multiply") Multiply
    .op(value="add") Add
    .op(value="swap") Swap
  .operation-body
    p(:show="op ==='add'")
      svg(width=16 height=16)
        circle(cx=8 cy=8 r=8 fill="red" :show="op === 'add'")
      | +
      input(:bind="factorString")
      svg(width=16 height=16)
        circle(cx=8 cy=8 r=8 fill="blue" :show="op === 'add'")
    p(:show="op ==='multiply'")
      | x
      input(:bind="factorString")
    .text
      .description(:show="op ==='multiply'") Multiply a row by a non-zero factor
      .description(:show="op ==='add'") Add a multiple of one row to another
      .description(:show="op ==='swap'") Swap two rows
    .bottom
      button.apply Apply
.matrix